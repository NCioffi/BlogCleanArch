@page "/postdelete/{Id:int}"

@using System.Net.Http
@using System.Net.Http.Json
@using Blazor.Models
@inject HttpClient Http

@inject NavigationManager NavigationManager
<h3>Eliminar Post</h3>


<p> ¿Desea eliminar el Post: @Id?</p>

<div>
    <button @onclick="Cancel"> Cancelar </button>
    <button @onclick="Delete"> Eliminar </button>
</div>
@code {
    [Parameter]
    public int Id { get; set; }

    Response<Post> respuesta = new Response<Post>();

    private void Cancel() => NavigationManager.NavigateTo("/posts");

    private async Task Delete()
    {
        var response = await Http.DeleteAsync("/post/" + Id);
        respuesta = response.Content.ReadFromJsonAsync<Response<Post>>().Result;
        NavigationManager.NavigateTo("/posts");
    }

}
